<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Documentos Operacionales | RT v1.0</title>

  <!-- Paleta y layout del sistema -->
  <link rel="stylesheet" href="estilos.css" />
  <link rel="icon" type="image/png" href="Logo Raitrai.png" />

  <!-- Ajustes mínimos locales (no tocan tu paleta) -->
  <style>
    /* Página clara y consistente */
    :root { color-scheme: light; }
    html, body { background:#f7f7f8 !important; color:#111 !important; }
    body.confirmaciones-page .card { background:#fff; }

    /* ===== Filtros en grilla de 12 columnas ===== */
    .filters-grid{
      display: grid;
      gap: 12px 16px;                         /* filas / columnas */
      grid-template-columns: repeat(12, minmax(0,1fr));
      align-items: end;                       /* alinear controles por la base */
    }
    
    .filters-grid .col{
      display:flex; flex-direction:column; gap:6px;
    }
    
    /* Spans */
    .filters-grid .span-1{ grid-column: span 1; }
    .filters-grid .span-2{ grid-column: span 2; }
    .filters-grid .span-3{ grid-column: span 3; }
    .filters-grid .span-4{ grid-column: span 4; }
    .filters-grid .span-5{ grid-column: span 5; }
    .filters-grid .span-6{ grid-column: span 6; }
    .filters-grid .span-7{ grid-column: span 7; }
    .filters-grid .span-8{ grid-column: span 8; }
    .filters-grid .span-9{ grid-column: span 9; }
    .filters-grid .span-10{ grid-column: span 10; }
    .filters-grid .span-11{ grid-column: span 11; }
    .filters-grid .span-12{ grid-column: span 12; }
    
    .filters-grid .align-end{ align-items:flex-end; }
    
    /* Inputs 100% y labels consistentes */
    .filters-grid label{ font-weight:600; font-size:.95rem; }
    .filters-grid input,
    .filters-grid select{
      width:100%;
      padding:8px 10px;
      border:1px solid #d1d5db; border-radius:8px;
      box-sizing:border-box;
    }
    
    /* Botonera al extremo derecho */
    .toolbar{ display:flex; gap:8px; justify-content:flex-end; width:100%; }
    
    /* Responsive: en < 1000px, una sola columna */
    @media (max-width: 999px){
      .filters-grid{ grid-template-columns: 1fr; }
      .filters-grid .align-end{ align-items:stretch; }
      .toolbar{ justify-content:stretch; }
    }

    body.confirmaciones-page main.main.fullwidth{
      max-width:none !important;
      width:100% !important;
      margin:12px 0 40px !important;
      padding:0 12px !important;
    }
    body.confirmaciones-page .main.fullwidth > .card{ width:100% !important; }

    /* Botonera */
    .toolbar { display:flex; gap:8px; align-items:center; }
    .toolbar .spacer { flex:1; }
    .progress { color:#6b7280; font-size:.9rem; }

    /* Tabla coherente con el sistema */
    table { width:100%; border-collapse: collapse; }
    thead th { background:#f8fafc; text-transform:uppercase; }
    th, td { border-bottom:1px solid #e5e7eb; padding:8px 10px; text-align:left; vertical-align:top; }
    td.right, th.right { text-align:right; }

    /* Badge fecha */
    .badge { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid #e5e7eb; font-size:.85rem; }

    /* ===== Forzar ancho completo SOLO en esta página ===== */
    body.confirmaciones-page main.main.fullwidth,
    body.confirmaciones-page .main.fullwidth{
      max-width: none !important;
      width: 100% !important;
      margin: 12px 0 40px !important;
      padding-left: 12px !important;
      padding-right: 12px !important;
      display: block !important;           /* anula posibles grids del sistema */
    }
    
    /* Las cards a 100% del ancho disponible */
    body.confirmaciones-page .main.fullwidth > .card{
      width: 100% !important;
      max-width: none !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
      display: block !important;
      box-sizing: border-box;
    }
    
    /* La tabla también a 100% */
    body.confirmaciones-page .main.fullwidth table{
      width: 100% !important;
    }
    
    /* Filtros en grilla amplia en desktop; 1 columna en móvil */
    body.confirmaciones-page .main.fullwidth .filters .row{
      display: grid !important;
      gap: 12px !important;
      grid-template-columns: 1fr !important;
    }
    @media (min-width: 1000px){
      body.confirmaciones-page .main.fullwidth .filters .row{
        grid-template-columns: repeat(6, minmax(0, 1fr)) !important;
      }
    }

  </style>
  <!-- Lógica de la página -->
  <script type="module" src="./documentos.js"></script>
</head>
<body class="confirmaciones-page">

  <!-- Encabezado unificado del sistema -->
  <div id="encabezado"></div>
  <script type="module">
    (async () => {
      const html = await (await fetch('encabezado.html')).text();
      document.getElementById('encabezado').innerHTML = html;
      await import('./firebase-init.js'); // mismo flujo que itinerarios
      await import('./script.js');        // header: usuario, reloj, botones nav
    })();
  </script>

  <main class="main fullwidth">
     <h2>DOCUMENTOS OPERACIONALES.-</h2>
    <!-- ====== FILTROS / BARRA SUPERIOR ====== -->
    <form id="filtros" class="filters card" style="padding:12px;margin-bottom:12px;">
      <div class="row" style="display:grid;gap:12px;grid-template-columns:repeat(6,minmax(0,1fr));">
        <div>
          <label>Nombre/Alias</label>
          <input id="fNombre" type="text" placeholder="Buscar por nombre o alias"/>
        </div>
        <div>
          <label>Código</label>
          <input id="fCodigo" type="text" placeholder="Número de negocio"/>
        </div>
        <div>
          <label>Coordinador(a)</label>
          <input id="fCoordinador" type="text" placeholder="Correo o nombre"/>
        </div>
        <div>
          <label>Año</label>
          <select id="fAno"></select>
        </div>
        <div>
          <label>Destino</label>
          <select id="fDestino"></select>
        </div>
        <div>
          <label>Programa</label>
          <select id="fPrograma"></select>
        </div>
        <div>
          <label>Hotel</label>
          <select id="fHotel"></select>
        </div>
        <div>
          <label>Inicio (día primer vuelo ida)</label>
          <input id="fInicioDia" type="date"/>
        </div>
      </div>
    
      <div style="display:flex;gap:8px;align-items:center;margin-top:12px;">
        <button type="button" id="btnBuscar" class="btn prim">Buscar</button>
        <button type="button" id="btnLimpiar" class="btn sec">Limpiar</button>
    
        <div style="flex:1"></div>
    
        <button type="button" id="btnDescSel" class="btn">Descargar seleccionados</button>
        <button type="button" id="btnDescAll" class="btn">Descargar todos</button>
    
        <span id="progressTxt" class="muted" style="margin-left:8px;"></span>
      </div>
    </form>
    
    <!-- ====== TABLA RESULTADOS ====== -->
    <div class="card" style="padding:12px;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <div class="muted" id="countHint">—</div>
      </div>
    
      <div class="table-wrap" style="overflow:auto;">
        <table class="table" style="width:100%;border-collapse:collapse;">
          <thead>
            <tr>
              <th style="width:36px;text-align:center;">
                <input type="checkbox" id="chkAll" />
              </th>
              <th>Alias</th>
              <th>Grupo</th>
              <th>Código</th>
              <th>Destino</th>
              <th>Programa</th>
              <th>Inicio</th>
              <th style="width:90px;text-align:right;">Acción</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <!-- las filas se rellenan desde renderTabla(...) -->
          </tbody>
        </table>
      </div>
    </div>

  </main>

<!-- Contenedor off-screen donde se monta la .print-doc antes de convertir a PDF -->
<div id="pdf-work" aria-hidden="true" style="position:fixed;left:-10000px;top:0;width:210mm;min-height:297mm;"></div>


<!-- html2pdf (requerido por descargarUno/descargarLote) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" referrerpolicy="no-referrer"></script>

</body>
</html>
