<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Confirmaciones | Rai Trai</title>
  <link rel="icon" type="image/png" href="Logo Raitrai.png" />

  <!-- Estilos m√≠nimos coherentes con tu sistema -->
  <style>
    :root{ color-scheme: light; }
    html, body{ background:#f7f7f8 !important; color:#111 !important; } /* SIN font:... -> respeta estilos.css */
  
    /* Layout */
    .main { max-width: 1200px; margin: 18px auto 40px; padding: 0 16px; }
    .page { padding: 1rem 1.2rem; }
    .page, .page * { text-transform: uppercase; }  /* igual que coordinadores */
  
    h2 { margin:.6rem 0 1rem; }
  
    /* Panel de filtros (nombre √∫nico para no chocar con tu .panel/.card global) */
    .cf-panel{ border:1px solid #ddd; border-radius:10px; background:#fff; }
    .cf-toolbar{ display:flex; flex-wrap:wrap; gap:.6rem; padding:.6rem .8rem; align-items:center; }
    .cf-toolbar .grow{ flex:1; min-width:260px; }            /* el buscador no se corta */
    .cf-toolbar input, .cf-toolbar select, .cf-toolbar button{
      height:34px; font: inherit !important;                 /* respeta tu fuente de estilos.css */
    }
    .note{ font-size:.9rem; color:#6b7280; padding:0 .8rem .6rem; }
  
    /* Grid de resultados */
    #grillaGrupos{
      display:grid; grid-template-columns:repeat(auto-fill, minmax(320px,1fr));
      gap:12px; margin-top:12px;
    }
  
    /* Cards SOLO dentro de grilla de confirmaciones (evita ‚Äúuniversal‚Äù) */
    #grillaGrupos .card{
      border:1px solid #ddd; border-radius:12px; background:#fff;
      box-shadow:0 2px 4px rgba(0,0,0,.06);
    }
    #grillaGrupos .card .hd{
      padding:.6rem .8rem; border-bottom:1px solid #eee;
      display:flex; justify-content:space-between; align-items:center; gap:.5rem;
    }
    #grillaGrupos .card .bd{ padding:.6rem .8rem; }
  
    /* Controles ‚Äúclaros‚Äù coherentes con el sistema */
    .ctrl{ border:1px solid #d1d5db; border-radius:8px; padding:6px 10px; background:#fff; }
    .ctrl:focus{ outline:none; border-color:#93c5fd; box-shadow:0 0 0 3px rgba(147,197,253,.35); }
  
    /* Botones (dejas tus clases si ya existen en estilos.css) */
    .btn-primary{ background:#0ea5e9; border:1px solid #0284c7; color:#fff; border-radius:8px; padding:.45em .8em; }
    .btn-primary:hover{ filter:brightness(.95); }
  </style>


  <!-- html2pdf bundle (html2canvas + jsPDF) -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <!-- Tu JS de p√°gina -->
  <script type="module" src="./confirmaciones.js"></script>
</head>
<body>
  <header>
    <div class="title">‚úÖ Confirmaciones (PDFs)</div>
    <div class="spacer"></div>
    <a class="ico" href="https://sistemas-raitrai.github.io/Operaciones-RTv1.0" title="Inicio">üè†</a>
    <button class="ico" id="btnReload" title="Actualizar">üîÑ</button>
    <button class="ico" id="btnBack" title="Volver atr√°s">‚¨ÖÔ∏è</button>
    <button class="ico" id="btnLogout" title="Cerrar sesi√≥n">‚èèÔ∏è</button>
  </header>

  <main>
    <section class="card">
      <form id="filtros" class="filters">
        <div>
          <label for="fNombre">Nombre/Alias del grupo</label>
          <input id="fNombre" type="text" placeholder="Ej: Compa√±√≠a de Mar√≠a 3B"/>
        </div>
        <div>
          <label for="fCodigo">C√≥digo / N¬∞ de negocio</label>
          <input id="fCodigo" type="text" placeholder="Ej: 1512"/>
        </div>
        <div>
          <label for="fCoordinador">Coordinador(a)</label>
          <input id="fCoordinador" type="text" placeholder="Ej: El√≠as Lagos"/>
        </div>
        <div>
          <label for="fAno">A√±o de viaje</label>
          <select id="fAno"></select>
        </div>
        <div>
          <label for="fDestino">Destino</label>
          <select id="fDestino"></select>
        </div>
        <div>
          <label for="fPrograma">Programa</label>
          <select id="fPrograma"></select>
        </div>

        <div class="col-2">
          <label for="fHotel">Hotel</label>
          <select id="fHotel"></select>
        </div>
        <div class="col-2">
          <label for="fInicioDia">D√≠a de inicio del viaje (primer vuelo de ida)</label>
          <input id="fInicioDia" type="date"/>
        </div>
        <div class="col-2">
          <label class="sr-only">Acciones</label>
          <div class="toolbar">
            <button type="button" class="primary" id="btnBuscar">Buscar</button>
            <button type="button" class="ghost" id="btnLimpiar">Limpiar</button>
          </div>
        </div>

        <div class="col-6 hint">
          Tip: el filtro por ‚Äúd√≠a de inicio‚Äù usa exclusivamente la fecha del <strong>primer vuelo de ida</strong>. Si el grupo no tiene vuelos de ida, no se incluir√° en ese filtro.
        </div>
      </form>
    </section>

    <section class="card" style="margin-top:12px;">
      <div class="toolbar" style="margin-bottom:6px;">
        <button type="button" id="btnDescAll" title="Descargar todos los resultados">‚¨áÔ∏è Descargar todos</button>
        <button type="button" id="btnDescSel" title="Descargar los seleccionados">‚¨áÔ∏è Descargar seleccionados</button>
        <div class="progress" id="progressTxt"></div>
      </div>

      <table id="tabla">
        <thead>
          <tr>
            <th><input type="checkbox" id="chkAll"/></th>
            <th>Alias</th>
            <th>Grupo</th>
            <th>C√≥digo</th>
            <th>Destino</th>
            <th>Programa</th>
            <th>Inicio (ida)</th>
            <th class="right">Acciones</th>
          </tr>
        </thead>
        <tbody id="tbody">
          <!-- filas -->
        </tbody>
      </table>
      <div class="hint" id="countHint" style="margin-top:6px;">‚Äî</div>
    </section>
  </main>

  <!-- contenedor temporal invisible para render a PDF -->
  <div id="pdf-work" style="position:absolute; left:-9999px; top:-9999px; width:794px; background:#ffffff;"></div>

  <script>
    // Botones nav simples
    document.getElementById('btnReload')?.addEventListener('click',()=>location.reload());
    document.getElementById('btnBack')?.addEventListener('click',()=>history.back());
    // btnLogout: deja el hook, tu l√≥gica real va en confirmaciones.js si usas Auth
  </script>
</body>
</html>
