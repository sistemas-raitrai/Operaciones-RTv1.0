<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Confirmaciones | RT v1.0</title>

  <!-- Paleta y layout del sistema -->
  <link rel="stylesheet" href="estilos.css" />
  <link rel="icon" type="image/png" href="Logo Raitrai.png" />

  <!-- Ajustes m√≠nimos locales (no tocan tu paleta) -->
  <style>
    /* P√°gina clara y consistente */
    :root { color-scheme: light; }
    html, body { background:#f7f7f8 !important; color:#111 !important; }
    body.confirmaciones-page .card { background:#fff; }

    /* ===== Filtros en grilla de 12 columnas ===== */
    .filters-grid{
      display: grid;
      gap: 12px 16px;                         /* filas / columnas */
      grid-template-columns: repeat(12, minmax(0,1fr));
      align-items: end;                       /* alinear controles por la base */
    }
    
    .filters-grid .col{
      display:flex; flex-direction:column; gap:6px;
    }
    
    /* Spans */
    .filters-grid .span-1{ grid-column: span 1; }
    .filters-grid .span-2{ grid-column: span 2; }
    .filters-grid .span-3{ grid-column: span 3; }
    .filters-grid .span-4{ grid-column: span 4; }
    .filters-grid .span-5{ grid-column: span 5; }
    .filters-grid .span-6{ grid-column: span 6; }
    .filters-grid .span-7{ grid-column: span 7; }
    .filters-grid .span-8{ grid-column: span 8; }
    .filters-grid .span-9{ grid-column: span 9; }
    .filters-grid .span-10{ grid-column: span 10; }
    .filters-grid .span-11{ grid-column: span 11; }
    .filters-grid .span-12{ grid-column: span 12; }
    
    .filters-grid .align-end{ align-items:flex-end; }
    
    /* Inputs 100% y labels consistentes */
    .filters-grid label{ font-weight:600; font-size:.95rem; }
    .filters-grid input,
    .filters-grid select{
      width:100%;
      padding:8px 10px;
      border:1px solid #d1d5db; border-radius:8px;
      box-sizing:border-box;
    }
    
    /* Botonera al extremo derecho */
    .toolbar{ display:flex; gap:8px; justify-content:flex-end; width:100%; }
    
    /* Responsive: en < 1000px, una sola columna */
    @media (max-width: 999px){
      .filters-grid{ grid-template-columns: 1fr; }
      .filters-grid .align-end{ align-items:stretch; }
      .toolbar{ justify-content:stretch; }
    }

    body.confirmaciones-page main.main.fullwidth{
      max-width:none !important;
      width:100% !important;
      margin:12px 0 40px !important;
      padding:0 12px !important;
    }
    body.confirmaciones-page .main.fullwidth > .card{ width:100% !important; }

    /* Botonera */
    .toolbar { display:flex; gap:8px; align-items:center; }
    .toolbar .spacer { flex:1; }
    .progress { color:#6b7280; font-size:.9rem; }

    /* Tabla coherente con el sistema */
    table { width:100%; border-collapse: collapse; }
    thead th { background:#f8fafc; text-transform:uppercase; }
    th, td { border-bottom:1px solid #e5e7eb; padding:8px 10px; text-align:left; vertical-align:top; }
    td.right, th.right { text-align:right; }

    /* Badge fecha */
    .badge { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid #e5e7eb; font-size:.85rem; }

    /* ===== Forzar ancho completo SOLO en esta p√°gina ===== */
    body.confirmaciones-page main.main.fullwidth,
    body.confirmaciones-page .main.fullwidth{
      max-width: none !important;
      width: 100% !important;
      margin: 12px 0 40px !important;
      padding-left: 12px !important;
      padding-right: 12px !important;
      display: block !important;           /* anula posibles grids del sistema */
    }
    
    /* Las cards a 100% del ancho disponible */
    body.confirmaciones-page .main.fullwidth > .card{
      width: 100% !important;
      max-width: none !important;
      margin-left: 0 !important;
      margin-right: 0 !important;
      display: block !important;
      box-sizing: border-box;
    }
    
    /* La tabla tambi√©n a 100% */
    body.confirmaciones-page .main.fullwidth table{
      width: 100% !important;
    }
    
    /* Filtros en grilla amplia en desktop; 1 columna en m√≥vil */
    body.confirmaciones-page .main.fullwidth .filters .row{
      display: grid !important;
      gap: 12px !important;
      grid-template-columns: 1fr !important;
    }
    @media (min-width: 1000px){
      body.confirmaciones-page .main.fullwidth .filters .row{
        grid-template-columns: repeat(6, minmax(0, 1fr)) !important;
      }
    }

  </style>

  <!-- html2pdf bundle -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <!-- L√≥gica de la p√°gina -->
  <script type="module" src="./confirmaciones.js"></script>
</head>
<body class="confirmaciones-page">

  <!-- Encabezado unificado del sistema -->
  <div id="encabezado"></div>
  <script type="module">
    (async () => {
      const html = await (await fetch('encabezado.html')).text();
      document.getElementById('encabezado').innerHTML = html;
      await import('./firebase-init.js'); // mismo flujo que itinerarios
      await import('./script.js');        // header: usuario, reloj, botones nav
    })();
  </script>

  <main class="main fullwidth">
    <!-- Filtros -->
    <section class="card">
      <h2>‚úÖ CONFIRMACIONES (PDFs)</h2>

      <form id="filtros" class="filters-grid">
        <!-- Fila 1 (12 col): 4 + 2 + 3 + 1 + 1 + 1 -->
        <div class="col span-4">
          <label for="fNombre">Nombre/Alias del grupo</label>
          <input id="fNombre" type="text" placeholder="Ej: Weston 3B"/>
        </div>
      
        <div class="col span-2">
          <label for="fCodigo">C√≥digo / N¬∞ negocio</label>
          <input id="fCodigo" type="text" placeholder="Ej: 1512"/>
        </div>
      
        <div class="col span-3">
          <label for="fCoordinador">Coordinador(a)</label>
          <input id="fCoordinador" type="text" placeholder="Ej: El√≠as Lagos"/>
        </div>
      
        <div class="col span-1">
          <label for="fAno">A√±o de viaje</label>
          <select id="fAno"></select>
        </div>
      
        <div class="col span-1">
          <label for="fDestino">Destino</label>
          <select id="fDestino"></select>
        </div>
      
        <div class="col span-1">
          <label for="fPrograma">Programa</label>
          <select id="fPrograma"></select>
        </div>
      
        <!-- Fila 2 (12 col): 3 + 2 + 7 (botones alineados a la derecha) -->
        <div class="col span-3">
          <label for="fHotel">Hotel</label>
          <select id="fHotel"></select>
        </div>
      
        <div class="col span-2">
          <label for="fInicioDia">Inicio del viaje (primer vuelo de ida)</label>
          <input id="fInicioDia" type="date"/>
        </div>
      
        <div class="col span-7 align-end">
          <div class="toolbar">
            <button type="button" class="btn-add" id="btnBuscar">üîé Buscar</button>
            <button type="button" class="btn-add secondary" id="btnLimpiar">Limpiar</button>
          </div>
        </div>
      </form>

    </section>

    <!-- Resultados -->
    <section class="card" style="margin-top:12px;">
      <div class="toolbar" style="margin-bottom:8px;">
        <button type="button" id="btnDescAll" class="btn-add">‚¨áÔ∏è Descargar todos</button>
        <button type="button" id="btnDescSel" class="btn-add">‚¨áÔ∏è Descargar seleccionados</button>
        <div class="spacer"></div>
        <div class="progress" id="progressTxt"></div>
      </div>

      <table id="tabla">
        <thead>
          <tr>
            <th><input type="checkbox" id="chkAll"/></th>
            <th>Alias</th>
            <th>Grupo</th>
            <th>C√≥digo</th>
            <th>Destino</th>
            <th>Programa</th>
            <th>Inicio (ida)</th>
            <th class="right">Acciones</th>
          </tr>
        </thead>
        <tbody id="tbody"><!-- filas --></tbody>
      </table>

      <div class="hint" id="countHint" style="margin-top:6px;">‚Äî</div>
    </section>
  </main>

  <!-- Contenedor temporal invisible para render a PDF -->
  <div id="pdf-work" style="position:absolute; left:-9999px; top:-9999px; width:794px; background:#ffffff;"></div>

</body>
</html>
