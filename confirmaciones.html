<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Confirmaciones | RT v1.0</title>

  <!-- Paleta y layout del sistema -->
  <link rel="stylesheet" href="estilos.css" />
  <link rel="icon" type="image/png" href="Logo Raitrai.png" />

  <!-- Ajustes m√≠nimos locales (no tocan tu paleta) -->
  <style>
    /* P√°gina clara y consistente */
    :root { color-scheme: light; }
    html, body { background:#f7f7f8 !important; color:#111 !important; }
    body.confirmaciones-page .card { background:#fff; }

    /* Grid de filtros usando tus columnas */
    .filters .row { display:flex; flex-wrap:wrap; gap:12px; }
    .filters .column { display:flex; flex-direction:column; gap:6px; }
    .filters .column.short   { width: 160px; }
    .filters .column.medium  { width: 260px; }
    .filters .column.long    { flex:1; min-width:260px; }

    /* Botonera */
    .toolbar { display:flex; gap:8px; align-items:center; }
    .toolbar .spacer { flex:1; }
    .progress { color:#6b7280; font-size:.9rem; }

    /* Tabla coherente con el sistema */
    table { width:100%; border-collapse: collapse; }
    thead th { background:#f8fafc; text-transform:uppercase; }
    th, td { border-bottom:1px solid #e5e7eb; padding:8px 10px; text-align:left; vertical-align:top; }
    td.right, th.right { text-align:right; }

    /* Badge fecha */
    .badge { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid #e5e7eb; font-size:.85rem; }
  </style>

  <!-- html2pdf bundle -->
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <!-- L√≥gica de la p√°gina -->
  <script type="module" src="./confirmaciones.js"></script>
</head>
<body class="confirmaciones-page">

  <!-- Encabezado unificado del sistema -->
  <div id="encabezado"></div>
  <script type="module">
    (async () => {
      const html = await (await fetch('encabezado.html')).text();
      document.getElementById('encabezado').innerHTML = html;
      await import('./firebase-init.js'); // mismo flujo que itinerarios
      await import('./script.js');        // header: usuario, reloj, botones nav
    })();
  </script>

  <main class="main">
    <!-- Filtros -->
    <section class="card">
      <h2>‚úÖ CONFIRMACIONES (PDFs)</h2>
      <form id="filtros" class="filters">
        <div class="row">
          <div class="column long">
            <label for="fNombre">Nombre/Alias del grupo</label>
            <input id="fNombre" type="text" placeholder="Ej: Weston 3B"/>
          </div>
          <div class="column short">
            <label for="fCodigo">C√≥digo / N¬∞ negocio</label>
            <input id="fCodigo" type="text" placeholder="Ej: 1512"/>
          </div>
          <div class="column medium">
            <label for="fCoordinador">Coordinador(a)</label>
            <input id="fCoordinador" type="text" placeholder="Ej: El√≠as Lagos"/>
          </div>
          <div class="column medium">
            <label for="fAno">A√±o de viaje</label>
            <select id="fAno"></select>
          </div>
          <div class="column medium">
            <label for="fDestino">Destino</label>
            <select id="fDestino"></select>
          </div>
          <div class="column medium">
            <label for="fPrograma">Programa</label>
            <select id="fPrograma"></select>
          </div>
          <div class="column medium">
            <label for="fHotel">Hotel</label>
            <select id="fHotel"></select>
          </div>
          <div class="column medium">
            <label for="fInicioDia">Inicio del viaje (primer vuelo de ida)</label>
            <input id="fInicioDia" type="date"/>
          </div>
        </div>

        <div class="row" style="margin-top:6px;">
          <div class="column long">
            <button type="button" class="btn-add" id="btnBuscar">üîé Buscar</button>
            <button type="button" class="btn-add secondary" id="btnLimpiar">Limpiar</button>
          </div>
          <div class="column long">
          </div>
        </div>
      </form>
    </section>

    <!-- Resultados -->
    <section class="card" style="margin-top:12px;">
      <div class="toolbar" style="margin-bottom:8px;">
        <button type="button" id="btnDescAll" class="btn-add">‚¨áÔ∏è Descargar todos</button>
        <button type="button" id="btnDescSel" class="btn-add">‚¨áÔ∏è Descargar seleccionados</button>
        <div class="spacer"></div>
        <div class="progress" id="progressTxt"></div>
      </div>

      <table id="tabla">
        <thead>
          <tr>
            <th><input type="checkbox" id="chkAll"/></th>
            <th>Alias</th>
            <th>Grupo</th>
            <th>C√≥digo</th>
            <th>Destino</th>
            <th>Programa</th>
            <th>Inicio (ida)</th>
            <th class="right">Acciones</th>
          </tr>
        </thead>
        <tbody id="tbody"><!-- filas --></tbody>
      </table>

      <div class="hint" id="countHint" style="margin-top:6px;">‚Äî</div>
    </section>
  </main>

  <!-- Contenedor temporal invisible para render a PDF -->
  <div id="pdf-work" style="position:absolute; left:-9999px; top:-9999px; width:794px; background:#ffffff;"></div>

</body>
</html>
