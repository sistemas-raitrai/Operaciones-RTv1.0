<!-- servicios.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Servicios Rai Trai</title>
  <link rel="stylesheet" href="estilos.css" />
  <style>
    /* ‚Äî‚Äî‚Äî Layout header ‚Äî‚Äî‚Äî */
    header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem }
    header h2 { margin:0 }
    header button{ background:#0055A4;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer }

    /* ‚Äî‚Äî‚Äî Secci√≥n + scroll ‚Äî‚Äî‚Äî */
    .section { margin-bottom:2rem }
    .section h3{ margin:.5rem 0 }
    .table-wrapper { overflow-x:auto }

    /* ‚Äî‚Äî‚Äî Tabla ‚Äî‚Äî‚Äî */
    table { width:100%; border-collapse:collapse; table-layout:fixed }
    thead th { position:sticky; top:0; background:#f9f9f9; z-index:2 }
    th, td { border:1px solid #ccc; padding:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; min-width:0 }

    /* ‚Äî‚Äî‚Äî Anchos (actualizados a 15 columnas) ‚Äî‚Äî‚Äî */
    /* 1: chk | 2: No | 3: Servicio | 4: Tipo Serv | 5: Categor√≠a (oculta) | 6: Ciudad | 7: Restricciones | 8: Proveedor | 9: Indicaciones | 10: Voucher | 11: Clave | 12: Tipo Cobro | 13: Moneda | 14: Valor | 15: Forma de Pago */
    th:nth-child(1),  td:nth-child(1)  { width:5% }
    th:nth-child(2),  td:nth-child(2)  { width:5% }
    th:nth-child(3),  td:nth-child(3)  { width:20% }
    th:nth-child(4),  td:nth-child(4)  { width:12% }
    th:nth-child(5),  td:nth-child(5)  { width:12% } /* Oculta abajo */
    th:nth-child(6),  td:nth-child(6)  { width:10% }
    th:nth-child(7),  td:nth-child(7)  { width:20% }
    th:nth-child(8),  td:nth-child(8)  { width:12% }
    th:nth-child(9),  td:nth-child(9)  { width:18% }  /* Indicaciones */
    th:nth-child(10), td:nth-child(10) { width:10% }  /* Voucher */
    th:nth-child(11), td:nth-child(11) { width:12% }  /* Clave */
    th:nth-child(12), td:nth-child(12) { width:10% }  /* Tipo Cobro */
    th:nth-child(13), td:nth-child(13) { width:8% }   /* Moneda */
    th:nth-child(14), td:nth-child(14) { width:10% }  /* Valor Servicio */
    th:nth-child(15), td:nth-child(15) { width:auto } /* Forma de Pago */

    /* ‚Äî‚Äî‚Äî Controles ‚Äî‚Äî‚Äî */
    .controls{ margin:.5rem 0; display:flex; gap:.5rem; flex-wrap:wrap }
    .controls button{ padding:.3rem .8rem; border:none; background:#0055A4; color:#fff; border-radius:4px; cursor:pointer }

    /* ‚Äî‚Äî‚Äî Modal proveedores ‚Äî‚Äî‚Äî */
    #backdrop-prov{ display:none; position:fixed; top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:100 }
    #modal-prov{
      display:none; position:fixed; top:50%; left:50%;
      transform:translate(-50%,-50%);
      width:clamp(900px, 95vw, 1400px);
      background:#fff; border-radius:4px; z-index:101;
      box-shadow:0 2px 10px rgba(0,0,0,0.2);
    }
    #modal-prov .header{ display:flex;justify-content:space-between;align-items:center;padding:.5rem 1rem;border-bottom:1px solid #ddd }
    #modal-prov .header h3{ margin:0;font-size:1.1rem }
    #modal-prov .header button{ background:transparent;border:none;font-size:1.2rem;cursor:pointer }
    #modal-prov iframe { width:100%;height:70vh;border:none }

    /* ‚Äî‚Äî‚Äî Floating editor ‚Äî‚Äî‚Äî */
    .floating-editor{ position:absolute; z-index:200; width:300px; height:80px; resize:both; box-sizing:border-box }

    /* Ocultar columna Categor√≠a (5¬™ columna) */
    /* Mant√©n oculta SOLO la 5¬™ (Categor√≠a) */
    table th:nth-child(5),
    table td:nth-child(5) {
      display: none;
    }
    
    /* FORMA DE PAGO (columna 15): visibilidad + ancho m√≠nimo */
    table th:nth-child(15),
    table td:nth-child(15) {
      display: table-cell !important;
      width: 12% !important;     /* o 10% / 140px si prefieres */
      min-width: 140px !important;
    }
    /* ‚Äî‚Äî‚Äî Bloque de filtros (armonizado) ‚Äî‚Äî‚Äî */
    .filters{
      display:flex; align-items:flex-end; gap:1rem; flex-wrap:wrap;
      background:#fff; border:1px solid #ddd; border-radius:6px;
      padding:.75rem 1rem; margin:.75rem 0 1rem;
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
    }
    .filters .field{
      display:flex; flex-direction:column; gap:.25rem;
    }
    
    /* Sobrescribe m√°rgenes globales de label aqu√≠ para que no se ‚Äúsuban‚Äù */
    .filters .field label{
      margin:0 !important; font-weight:600; color:#333;
    }
    
    /* Select de destinos: ancho y alto generoso (multi) */
    #destFilter{
      width: 280px;           /* puedes subir a 320px si quieres */
      height: 150px;          /* alto c√≥modo para multi-selecci√≥n */
      border:1px solid #bbb; border-radius:6px;
      padding:.35rem .5rem; box-sizing:border-box;
      background:#f9f9f9;
    }
    
    /* Buscador: crece y llena el espacio a la derecha */
    .filters .grow{ flex:1 1 340px; }   /* m√≠nimo 340px */
    #srvSearch{
      width:100%; height: 42px;         /* alto uniforme con botones */
      border:1px solid #bbb; border-radius:6px;
      padding: 0 .75rem; box-sizing:border-box;
      background:#fff;
    }
    
    /* Peque√±o foco agradable */
    #destFilter:focus, #srvSearch:focus{
      outline: 2px solid #0b3d91;
      border-color: #0b3d91;
    }

  </style>
</head>
<body>
  <div id="encabezado"></div>
  <header>
    <h2>üìãLISTA DE SERVICIOS</h2>
    <button id="btnProv">üõ†Ô∏è Administrar Proveedores</button>
  </header>

  <div class="row">
    <div id="backdrop-prov" onclick="closeProveedores()"></div>
    <div id="modal-prov">
      <div class="header">
        <h3>Administrar Proveedores</h3>
        <button onclick="closeProveedores()">‚úñÔ∏è</button>
      </div>
      <iframe id="iframe-prov" src=""></iframe>
    </div>

    <!-- Filtros (destinos + buscador) -->
    <div id="filters" class="filters">
      <div class="field">
        <label for="destFilter">Filtrar destinos</label>
        <select id="destFilter" multiple>
          <option value="ALL">‚Äî Todos ‚Äî</option>
          <option value="BRASIL">BRASIL</option>
          <option value="BARILOCHE">BARILOCHE</option>
          <option value="SUR DE CHILE">SUR DE CHILE</option>
          <option value="NORTE DE CHILE">NORTE DE CHILE</option>
          <option value="OTRO">OTRO</option>
        </select>
      </div>
    
      <div class="field grow">
        <label for="srvSearch">Buscador</label>
        <input id="srvSearch" type="search"
               placeholder="SERVICIO / PROVEEDOR / CIUDAD / RESTRICCIONES / INDICACIONES / VOUCHER / CLAVE" />
      </div>
    </div>

  </div>

  <div id="secciones"></div>

  <!-- SOLO este bloque, no pongas nada de l√≥gica interna aqu√≠ -->
  <script type="module">
    (async () => {
      // 1. Inyectar encabezado HTML
      const html = await (await fetch('encabezado.html')).text();
      document.getElementById('encabezado').innerHTML = html;

      // 2. Importar en orden
      await import('./firebase-init.js');
      await import('./script.js');      // usuario/reloj/header
      await import('./servicios.js');   // l√≥gica de esta p√°gina
    })();
  </script>
</body>
</html>
