<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>BIT√ÅCORA POR ACTIVIDAD ¬∑ RT</title>
  <link rel="icon" type="image/png" href="RaitraiLogo.png" />
  <!-- Reusa tu est√©tica global -->
  <link rel="stylesheet" href="style.css"/>

  <style>
    /* Ajustes m√≠nimos (sin romper tu style.css) */
    .page { max-width: 1200px; margin: 0 auto; padding: 16px; }
    .topbar {
      display:flex; align-items:center; justify-content:space-between;
      gap: 10px; padding: 10px 12px; border-radius: 14px;
      background: var(--panel, #fff); border: 1px solid var(--border, #d1d5db);
      position: sticky; top: 10px; z-index: 10;
    }
    .topbar-left { display:flex; align-items:center; gap:10px; }
    .topbar .brand { display:flex; align-items:center; gap:10px; }
    .topbar .brand img { height: 28px; width:auto; }
    .topbar .brand b { letter-spacing: .3px; }
    .topbar-actions { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .iconbtn {
      border: 1px solid var(--border, #d1d5db);
      background: var(--card, #fff);
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      line-height: 1;
    }
    .iconbtn:hover { filter: brightness(0.98); }
    .card {
      margin-top: 14px;
      background: var(--panel, #fff);
      border: 1px solid var(--border, #d1d5db);
      border-radius: 14px;
      padding: 12px;
    }
    .grid {
      display:grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 10px;
      align-items: end;
    }
    .grid .span2 { grid-column: span 2; }
    .grid .span3 { grid-column: span 3; }
    .grid .span6 { grid-column: span 6; }
    label { display:block; font-size: 12px; color: var(--muted, #6b7280); margin: 0 0 4px; }
    input, select {
      width: 100%;
      border: 1px solid var(--border, #d1d5db);
      background: var(--card, #fff);
      color: var(--ink, #0f172a);
      border-radius: 12px;
      padding: 10px 10px;
      outline: none;
    }
    .btnrow { display:flex; gap:8px; flex-wrap:wrap; }
    .btn {
      border: 1px solid var(--border, #d1d5db);
      background: var(--bg-strong, #00a89d);
      color: white;
      border-radius: 12px;
      padding: 10px 12px;
      cursor: pointer;
      font-weight: 600;
    }
    .btn.secondary {
      background: var(--card, #fff);
      color: var(--ink, #0f172a);
    }
    .muted { color: var(--muted, #6b7280); font-size: 12px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border-bottom: 1px solid var(--border, #e5e7eb); padding: 8px 8px; vertical-align: top; }
    th { text-align:left; font-size: 12px; color: var(--muted, #6b7280); font-weight: 700; }
    td { font-size: 13px; }
    .pill {
      display:inline-block; padding: 3px 8px; border-radius: 999px;
      border: 1px solid var(--border, #d1d5db);
      font-size: 12px;
      background: rgba(0,0,0,.02);
    }
    .nowrap { white-space: nowrap; }
    .wraptext { white-space: pre-wrap; }
    .rowlink { text-decoration: underline; }
    .right { text-align:right; }
    .kpi { display:flex; gap:14px; flex-wrap:wrap; }
    .kpi > div { padding: 8px 10px; border:1px solid var(--border, #d1d5db); border-radius: 12px; background: var(--card,#fff); }
    .kpi .v { font-weight: 800; }
    @media (max-width: 980px){
      .grid { grid-template-columns: repeat(2, minmax(0,1fr)); }
      .grid .span2, .grid .span3, .grid .span6 { grid-column: span 2; }
    }
  </style>
</head>

<body>
  <div class="page">
    <!-- Encabezado com√∫n (mismo esp√≠ritu que tus m√≥dulos) -->
    <div class="topbar">
      <div class="topbar-left">
        <div class="brand">
          <img src="RaitraiLogo.png" alt="RT"/>
          <div>
            <b>BIT√ÅCORA POR ACTIVIDAD</b>
            <div class="muted">Ver comentarios de una actividad en todos los grupos</div>
          </div>
        </div>
      </div>

      <div class="topbar-actions">
        <button class="iconbtn" id="btn-home" title="Inicio">üè†</button>
        <button class="iconbtn" id="btn-refresh" title="Actualizar">üîÑ</button>
        <button class="iconbtn" id="btn-back" title="Volver">‚¨ÖÔ∏è</button>
        <button class="iconbtn" id="btn-logout" title="Cerrar sesi√≥n">‚èèÔ∏è</button>
      </div>
    </div>

    <!-- Filtros -->
    <div class="card">
      <div class="grid">
        <div class="span2">
          <label>Destino (opcional, recomendado)</label>
          <input id="filtroDestino" list="dl-destinos" placeholder="Ej: BARILOCHE / BRASIL / ..."/>
          <datalist id="dl-destinos"></datalist>
        </div>

        <div class="span2">
          <label>Coordinador(a) (opcional)</label>
          <input id="filtroCoord" list="dl-coords" placeholder="email coordinador"/>
          <datalist id="dl-coords"></datalist>
        </div>

        <div class="span2">
          <label>Grupo espec√≠fico (opcional)</label>
          <input id="filtroGrupo" list="dl-grupos" placeholder="ID grupo (gid)"/>
          <datalist id="dl-grupos"></datalist>
        </div>

        <div class="span3">
          <label>Actividad (obligatorio)</label>
          <input id="filtroActividad" list="dl-actividades" placeholder="Ej: telefericoparque..."/>
          <datalist id="dl-actividades"></datalist>
          <div class="muted" style="margin-top:6px;">
            Tip: usa ‚ÄúCargar actividades‚Äù para poblar sugerencias seg√∫n destino/coord/fechas.
          </div>
        </div>

        <div>
          <label>Desde</label>
          <input id="filtroDesde" type="date"/>
        </div>

        <div>
          <label>Hasta</label>
          <input id="filtroHasta" type="date"/>
        </div>

        <div class="span6 btnrow" style="margin-top:6px;">
          <button class="btn secondary" id="btnCargarActividades">Cargar actividades</button>
          <button class="btn" id="btnCargar">Cargar bit√°cora</button>
          <button class="btn secondary" id="btnLimpiar">Limpiar</button>

          <div style="flex:1"></div>

          <div style="min-width: 280px;">
            <label>Buscar texto (en resultados)</label>
            <input id="buscarTexto" placeholder="Ej: apoderada / no realizan / etc."/>
          </div>
        </div>

        <div class="span6">
          <div id="pagInfo" class="muted">Listo.</div>
        </div>
      </div>
    </div>

    <!-- KPI -->
    <div class="card">
      <div class="kpi">
        <div><div class="muted">Grupos considerados</div><div class="v" id="kpiGrupos">‚Äî</div></div>
        <div><div class="muted">D√≠as consultados</div><div class="v" id="kpiDias">‚Äî</div></div>
        <div><div class="muted">Entradas encontradas</div><div class="v" id="kpiEntradas">‚Äî</div></div>
      </div>
      <div class="muted" style="margin-top:8px;">
        Nota: como la subcolecci√≥n de fecha es din√°mica, el sistema consulta d√≠a a d√≠a dentro del rango seleccionado.
      </div>
    </div>

    <!-- Tabla -->
    <div class="card">
      <div class="muted" id="resumenTabla">Sin datos.</div>
      <div style="overflow:auto; margin-top:8px;">
        <table id="tblBitacora">
          <thead>
            <tr>
              <th class="nowrap">Fecha</th>
              <th class="nowrap">Hora</th>
              <th>Grupo</th>
              <th class="nowrap">Actividad</th>
              <th>Texto</th>
              <th class="nowrap">Autor</th>
            </tr>
          </thead>
          <tbody>
            <tr><td colspan="6" class="muted">Cargando‚Ä¶</td></tr>
          </tbody>
        </table>
      </div>
    </div>

  </div>

  <script type="module" src="./bitacora_actividad.js"></script>
</body>
</html>
