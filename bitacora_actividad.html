<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bitácora | RT</title>

  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <link rel="stylesheet" href="estilos.css" />
  <link rel="icon" type="image/png" href="Logo Raitrai.png" />

  <!-- ✅ OVERRIDE sobre tu estilos.css (solo para esta página) -->
  <style>
    /* 1) No heredar el padding enorme del body, y controlar ancho */
    body { padding: 0 !important; background: #f6f6f6; }

    /* 2) Contenedor principal: parecido a tus páginas más nuevas */
    .rt-page{
      padding: 1rem 1.2rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* 3) Inputs NO deben ser full width siempre (tu css los fuerza).
          Aquí controlamos el layout con grid. */
    .rt-filters{
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
      margin-top: .8rem;
    }
    .rt-grid{
      display:grid;
      grid-template-columns: 1.2fr 1.2fr 1.2fr;
      gap: .7rem;
      align-items:end;
    }
    @media (max-width: 900px){
      .rt-grid{ grid-template-columns: 1fr; }
    }

    /* 4) En esta página NO queremos mayúsculas forzadas en texto libre */
    #bitacoraRoot input, #bitacoraRoot select, #bitacoraRoot textarea {
      text-transform: none !important;
      width: 100% !important;
      margin-top: .2rem;
      border: 1px solid #d1d5db;
      border-radius: 10px;
      padding: .55rem .7rem;
      font-size: .95rem;
      box-sizing: border-box;
      background:#fff;
    }
    #bitacoraRoot label{
      margin: 0;
      font-size: .78rem;
      text-transform: uppercase;
      letter-spacing: .02em;
      color:#6b7280;
    }

    /* 5) Botonera */
    .rt-actions{
      display:flex;
      flex-wrap: wrap;
      gap: .6rem;
      margin-top: .8rem;
      align-items:center;
    }
    .rt-btn{
      padding: .6rem 1rem;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background:#004080;
      color:#fff;
      font-weight: 700;
      font-size: .9rem;
    }
    .rt-btn.secondary{
      background:#0b57d0;
    }
    .rt-btn.ghost{
      background:#11182710;
      color:#111827;
      border:1px solid #d1d5db;
    }
    .rt-status{
      font-size: .9rem;
      opacity: .75;
    }

    /* 6) Resultados */
    .rt-card{
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:12px;
      padding: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
      margin-top: 1rem;
    }
    .rt-card h3{
      margin:0 0 .6rem;
      font-size: 1.1rem;
      border-bottom:1px solid #e5e7eb;
      padding-bottom:.5rem;
    }

    /* 7) Panel actividad */
    .act-panel{
      border:1px solid #e5e7eb;
      border-radius: 12px;
      overflow: hidden;
      margin-top: .8rem;
    }
    .act-head{
      display:flex;
      gap:.6rem;
      align-items:center;
      justify-content:space-between;
      padding:.7rem .9rem;
      background:#f9fafb;
      border-bottom:1px solid #e5e7eb;
    }
    .act-title{
      font-weight:800;
      letter-spacing:.01em;
    }
    .act-meta{
      font-size:.85rem;
      opacity:.75;
      white-space:nowrap;
    }

    .act-body{ padding: .6rem .9rem; }

    /* 8) Fila comentario */
    .entry{
      display:grid;
      grid-template-columns: 120px 1fr 220px;
      gap:.8rem;
      padding:.55rem .2rem;
      border-bottom:1px dashed #e5e7eb;
      align-items:start;
    }
    .entry:last-child{ border-bottom:none; }
    @media (max-width: 900px){
      .entry{ grid-template-columns: 1fr; }
      .entry .right{ order: 3; }
    }

    .mono{ font-family: ui-monospace, Menlo, Consolas, "Courier New", monospace; }
    .muted{ opacity:.75; }
    .chip{
      display:inline-block;
      padding:.2rem .5rem;
      border-radius:999px;
      background:#11182710;
      border:1px solid #d1d5db;
      font-size:.78rem;
      margin-right:.35rem;
    }

    /* 9) Caja “texto comentario” */
    .entry-text{
      white-space: pre-wrap;
      line-height: 1.25;
    }

    /* 10) Encabezado de la página */
    .rt-title{ margin:.2rem 0 0; }
    .rt-hint{ margin:.35rem 0 0; font-size:.92rem; opacity:.75; }
  </style>
</head>

<body>
  <div id="encabezado"></div>

  <div id="bitacoraRoot" class="rt-page">
    <h2 class="rt-title">BITÁCORA</h2>
    <div class="rt-hint">
      - <b>Por GRUPO</b>: eliges un grupo y ves <b>todas las actividades</b> con sus comentarios.<br/>
      - <b>Por DESTINO / ACTIVIDAD</b>: eliges destino y (opcional) actividad, y ves los comentarios de <b>todos los grupos</b>.
    </div>

    <div class="rt-filters">
      <div class="rt-grid">
        <div>
          <label>Destino (opcional)</label>
          <input id="fDestino" type="text" list="dl-destinos" placeholder="Ej: BARILOCHE" />
          <datalist id="dl-destinos"></datalist>
        </div>

        <div>
          <label>Coordinador(a) (opcional)</label>
          <input id="fCoord" type="email" list="dl-coords" placeholder="email coordinador" />
          <datalist id="dl-coords"></datalist>
        </div>

        <div>
          <label>Grupo específico (opcional)</label>
          <input id="fGrupo" type="text" list="dl-grupos" placeholder="ID doc Firestore del grupo" />
          <datalist id="dl-grupos"></datalist>
        </div>
      </div>

      <div class="rt-grid" style="margin-top:.7rem;">
        <div style="grid-column: 1 / -1;">
          <label>Actividad (opcional)</label>
          <input id="fActividad" type="text" list="dl-actividades" placeholder="Ej: telefericoparque (activityId)" />
          <datalist id="dl-actividades"></datalist>
        </div>
      </div>

      <div class="rt-actions">
        <button class="rt-btn" id="btnLoadActs">CARGAR ACTIVIDADES</button>
        <button class="rt-btn secondary" id="btnCargar">CARGAR BITÁCORA</button>
        <button class="rt-btn ghost" id="btnLimpiar">LIMPIAR</button>
        <span class="rt-status" id="status">Listo.</span>
      </div>

      <div class="rt-actions" style="margin-top:.5rem;">
        <span class="chip" id="chipModo">Modo: —</span>
        <span class="chip" id="chipGrupos">Grupos: —</span>
        <span class="chip" id="chipActividades">Actividades: —</span>
        <span class="chip" id="chipEntradas">Entradas: 0</span>
      </div>
    </div>

    <div class="rt-card">
      <h3>Resultados</h3>
      <div id="results"></div>
    </div>
  </div>

  <!-- loader típico tuyo -->
  <script type="module">
    (async () => {
      try {
        const html = await (await fetch('encabezado.html')).text().catch(()=> '');
        document.getElementById('encabezado').innerHTML = html || '';
      } catch (_) {}

      await import('./firebase-init.js');
      await import('./script.js');
      await import('./bitacora_actividad.js');
      console.log('✅ bitacora_actividad.js cargado');
    })();
  </script>
  <script type="module" src="firebase-init.js" defer></script>
</body>
</html>
