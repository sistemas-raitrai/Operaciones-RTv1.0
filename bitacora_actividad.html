<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bitácora por Actividad</title>

  <!-- Tu CSS general (lo mantenemos) -->
  <link rel="stylesheet" href="./estilos.css" />

  <!-- ✅ CSS “encima” para que no lo rompa estilos.css -->
  <style>
    /* Scope para no pelear con estilos globales */
    .bitview { max-width: 1200px; margin: 0 auto; }
    .bitview * { box-sizing: border-box; }

    /* Evitar que el CSS global te destruya el layout */
    .bitview input, .bitview select, .bitview textarea { text-transform: none !important; }

    .bitview .panel {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 16px;
      margin: 16px 0;
      box-shadow: 0 2px 10px rgba(0,0,0,.05);
    }

    .bitview h1 { margin: 0 0 6px; font-size: 26px; }
    .bitview .sub { margin: 0 0 14px; color: #475569; line-height: 1.35; }

    .bitview .grid {
      display: grid;
      grid-template-columns: 1.2fr 1fr 1fr;
      gap: 12px;
      margin: 12px 0;
      justify-content: stretch;  /* pisa tu .grid global */
    }
    @media (max-width: 900px){
      .bitview .grid { grid-template-columns: 1fr; }
    }

    .bitview label { margin: 0 0 6px; font-size: 12px; color: #334155; font-weight: 700; letter-spacing: .02em; }
    .bitview .ctrl { display:flex; flex-direction: column; gap: 6px; }
    .bitview select, .bitview input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #cbd5e1;
      background: #f8fafc;
      outline: none;
    }

    .bitview .rowbtn {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 10px;
    }
    .bitview .btn {
      appearance: none;
      border: 0;
      border-radius: 8px;
      padding: 10px 12px;
      cursor: pointer;
      background: #004080;
      color: #fff;
      font-weight: 700;
      letter-spacing: .02em;
    }
    .bitview .btn.sec { background: #0f172a; }
    .bitview .btn.ghost { background: #e2e8f0; color:#0f172a; }
    .bitview .btn:disabled { opacity: .5; cursor: not-allowed; }

    .bitview .metaLine { color:#475569; font-size: 13px; margin-top: 8px; }

    .bitview .resultsHead {
      display:flex; justify-content: space-between; align-items: baseline;
      gap: 10px; flex-wrap: wrap;
      margin-bottom: 10px;
    }
    .bitview .pill {
      display:inline-flex; gap:8px; align-items:center;
      padding: 6px 10px; border-radius: 999px;
      border: 1px solid #cbd5e1; background:#f8fafc; color:#0f172a;
      font-size: 12px; font-weight: 700;
    }

    .bitview .search {
      width: min(520px, 100%);
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #cbd5e1;
      background: #fff;
    }

    .bitview .cards { display: grid; gap: 10px; }
    .bitview .card {
      background: #fff;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 12px;
    }
    .bitview .cardHead {
      display:flex; justify-content: space-between; align-items: flex-start;
      gap: 10px; flex-wrap: wrap;
      border-bottom: 1px dashed #e2e8f0;
      padding-bottom: 8px;
      margin-bottom: 8px;
    }
    .bitview .cardTitle { font-weight: 900; letter-spacing: .02em; }
    .bitview .cardSub { color:#475569; font-size: 13px; }
    .bitview .note {
      padding: 8px 10px;
      border-radius: 10px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      margin: 6px 0;
      white-space: pre-wrap;
      line-height: 1.25;
    }
    .bitview .noteMeta { color:#64748b; font-size: 12px; margin-top: 4px; }
    .bitview .muted { color:#64748b; }
    .bitview .warn { color:#b45309; font-weight: 800; }
    .bitview .err { color:#be123c; font-weight: 800; }
  </style>
</head>

<body>
  <!-- respeta tu header fijo global si existe -->
  <main class="bitview">
    <div class="panel">
      <h1>BITÁCORA POR ACTIVIDAD</h1>
      <p class="sub">
        • <b>Modo Grupo</b>: muestra todas las actividades del itinerario del grupo + sus comentarios.<br>
        • <b>Modo Actividad</b>: muestra una actividad (por destino/filtros) + todos los comentarios de todos los grupos filtrados.
      </p>

      <div class="grid">
        <div class="ctrl">
          <label>DESTINO (opcional, recomendado)</label>
          <select id="fDestino">
            <option value="">(Todos)</option>
          </select>
        </div>

        <div class="ctrl">
          <label>COORDINADOR(A) (opcional)</label>
          <select id="fCoord">
            <option value="">(Todos)</option>
          </select>
        </div>

        <div class="ctrl">
          <label>GRUPO ESPECÍFICO (opcional)</label>
          <select id="fGrupo">
            <option value="">(Todos)</option>
          </select>
        </div>
      </div>

      <div class="grid" style="grid-template-columns: 1.2fr 1fr 1fr;">
        <div class="ctrl">
          <label>MODO</label>
          <select id="fModo">
            <option value="grupo">POR GRUPO (todas sus actividades)</option>
            <option value="actividad">POR ACTIVIDAD (en todos los grupos filtrados)</option>
          </select>
        </div>

        <div class="ctrl">
          <label>ACTIVIDAD (solo si MODO = ACTIVIDAD)</label>
          <select id="fActividad" disabled>
            <option value="">(Selecciona destino y/o carga)</option>
          </select>
        </div>

        <div class="ctrl">
          <label>LÍMITE (protección de rendimiento)</label>
          <select id="fLimit">
            <option value="80">80 notas</option>
            <option value="200" selected>200 notas</option>
            <option value="400">400 notas</option>
            <option value="800">800 notas</option>
          </select>
        </div>
      </div>

      <div class="rowbtn">
        <button class="btn" id="btnCargar">CARGAR BITÁCORA</button>
        <button class="btn ghost" id="btnLimpiar">LIMPIAR</button>
        <span class="metaLine" id="metaStatus">Listo.</span>
      </div>
    </div>

    <div class="panel">
      <div class="resultsHead">
        <div class="pill" id="pillResumen">ENTRADAS: 0</div>
        <input class="search" id="qBuscar" placeholder="BUSCAR TEXTO (en resultados)" />
      </div>

      <div id="results" class="cards">
        <div class="muted">Sin resultados.</div>
      </div>
    </div>
  </main>

  <script type="module" src="./bitacora_actividades.js"></script>
</body>
</html>
